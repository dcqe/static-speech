{"ast":null,"code":"import _toConsumableArray from\"/home/students/ge47qut/public_html/v2/react-speech/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/students/ge47qut/public_html/v2/react-speech/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import produce from\"immer\";import{loadPersistedState}from\"../utilities/persistence\";import{hasDialog}from\"../filterConfig\";import*as actionTypes from\"../actionTypes\";var defaultState={db:{cocktails:[],ingredients:[],glasses:[]},filterOptions:{activeFilters:[],activeDialog:null,ingredients:[],ingredientsRule:\"mustInclude\",barOnly:false,categories:[],glasses:[]},bar:[],favourites:[],settings:{theme:\"light\",color:\"indigo\",browserMode:\"card\",units:\"cl\",pride:false,lingo:false}};// Parts of the initial state will be from our persistence layer.\nvar persistedState=loadPersistedState();var initialState=produce(_objectSpread(_objectSpread({},defaultState),persistedState),function(draft){draft.settings=_objectSpread(_objectSpread(_objectSpread({},defaultState.settings),draft.settings),persistedState?persistedState.settings:null);});/**\n * Main reducer\n */export default(function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;return produce(state,function(draft){switch(action.type){case actionTypes.LOAD_COCKTAILS:draft.db.cocktails=action.payload;break;case actionTypes.LOAD_INGREDIENTS:draft.db.ingredients=action.payload;break;case actionTypes.LOAD_GLASSES:draft.db.glasses=action.payload;break;case actionTypes.UPDATE_FAVOURITES:draft.favourites=action.payload;break;case actionTypes.UPDATE_FILTER:draft.filterOptions=_objectSpread(_objectSpread({},draft.filterOptions),action.payload);break;case actionTypes.ACTIVATE_FILTER_DIALOG:draft.filterOptions.activeDialog=action.payload&&hasDialog(action.payload)?action.payload:null;break;case actionTypes.CLOSE_FILTER_DIALOG:draft.filterOptions.activeDialog=null;break;case actionTypes.SET_BAR:draft.bar=action.payload;break;case actionTypes.TOGGLE_PRIDE:draft.settings.pride=!draft.settings.pride;break;case actionTypes.TOGGLE_LINGO:draft.settings.lingo=!draft.settings.lingo;break;case actionTypes.UPDATE_SETTINGS:draft.settings=_objectSpread(_objectSpread({},draft.settings),action.payload);break;case actionTypes.ADD_TO_BAR:draft.bar=_toConsumableArray(new Set([].concat(_toConsumableArray(draft.bar),[action.payload])));break;case actionTypes.START_ENRICH_COCKTAIL:draft.db.cocktails.find(function(c){return c.name===action.payload;}).enriching=true;break;case actionTypes.FAIL_ENRICH_COCKTAIL:Object.assign(draft.db.cocktails.find(function(c){return c.name===action.payload.cocktailName;}),{enriching:false,enrichmentFailed:true,enrichmentFailedError:action.payload.error.message});break;case actionTypes.FINISH_ENRICH_COCKTAIL:Object.assign(draft.db.cocktails.find(function(c){return c.name===action.payload.cocktailName;}),{enriching:false,enriched:true,enrichment:action.payload.enrichment});break;default:}});});","map":{"version":3,"sources":["/home/students/ge47qut/public_html/v2/react-speech/src/reducers/index.js"],"names":["produce","loadPersistedState","hasDialog","actionTypes","defaultState","db","cocktails","ingredients","glasses","filterOptions","activeFilters","activeDialog","ingredientsRule","barOnly","categories","bar","favourites","settings","theme","color","browserMode","units","pride","lingo","persistedState","initialState","draft","state","action","type","LOAD_COCKTAILS","payload","LOAD_INGREDIENTS","LOAD_GLASSES","UPDATE_FAVOURITES","UPDATE_FILTER","ACTIVATE_FILTER_DIALOG","CLOSE_FILTER_DIALOG","SET_BAR","TOGGLE_PRIDE","TOGGLE_LINGO","UPDATE_SETTINGS","ADD_TO_BAR","Set","START_ENRICH_COCKTAIL","find","c","name","enriching","FAIL_ENRICH_COCKTAIL","Object","assign","cocktailName","enrichmentFailed","enrichmentFailedError","error","message","FINISH_ENRICH_COCKTAIL","enriched","enrichment"],"mappings":"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","sourcesContent":["import produce from \"immer\";\nimport { loadPersistedState } from \"../utilities/persistence\";\nimport { hasDialog } from \"../filterConfig\";\n\nimport * as actionTypes from \"../actionTypes\";\n\nconst defaultState = {\n  db: {\n    cocktails: [],\n    ingredients: [],\n    glasses: []\n  },\n  filterOptions: {\n    activeFilters: [],\n    activeDialog: null,\n    ingredients: [],\n    ingredientsRule: \"mustInclude\",\n    barOnly: false,\n    categories: [],\n    glasses: []\n  },\n  bar: [],\n  favourites: [],\n  settings: {\n    theme: \"light\",\n    color: \"indigo\",\n    browserMode: \"card\",\n    units: \"cl\",\n    pride: false,\n    lingo: false\n  }\n};\n\n// Parts of the initial state will be from our persistence layer.\n\nconst persistedState = loadPersistedState();\n\nconst initialState = produce({ ...defaultState, ...persistedState }, draft => {\n  draft.settings = {\n    ...defaultState.settings,\n    ...draft.settings,\n    ...(persistedState ? persistedState.settings : null)\n  };\n});\n\n/**\n * Main reducer\n */\nexport default (state = initialState, action) =>\n  produce(state, draft => {\n    switch (action.type) {\n      case actionTypes.LOAD_COCKTAILS:\n        draft.db.cocktails = action.payload;\n        break;\n      case actionTypes.LOAD_INGREDIENTS:\n        draft.db.ingredients = action.payload;\n        break;\n      case actionTypes.LOAD_GLASSES:\n        draft.db.glasses = action.payload;\n        break;\n      case actionTypes.UPDATE_FAVOURITES:\n        draft.favourites = action.payload;\n        break;\n      case actionTypes.UPDATE_FILTER:\n        draft.filterOptions = { ...draft.filterOptions, ...action.payload };\n        break;\n      case actionTypes.ACTIVATE_FILTER_DIALOG:\n        draft.filterOptions.activeDialog =\n          action.payload && hasDialog(action.payload) ? action.payload : null;\n        break;\n      case actionTypes.CLOSE_FILTER_DIALOG:\n        draft.filterOptions.activeDialog = null;\n        break;\n      case actionTypes.SET_BAR:\n        draft.bar = action.payload;\n        break;\n      case actionTypes.TOGGLE_PRIDE:\n        draft.settings.pride = !draft.settings.pride;\n        break;\n      case actionTypes.TOGGLE_LINGO:\n        draft.settings.lingo = !draft.settings.lingo;\n        break;\n      case actionTypes.UPDATE_SETTINGS:\n        draft.settings = { ...draft.settings, ...action.payload };\n        break;\n      case actionTypes.ADD_TO_BAR:\n        draft.bar = [...new Set([...draft.bar, action.payload])];\n        break;\n      case actionTypes.START_ENRICH_COCKTAIL:\n        draft.db.cocktails.find(\n          c => c.name === action.payload\n        ).enriching = true;\n        break;\n      case actionTypes.FAIL_ENRICH_COCKTAIL:\n        Object.assign(\n          draft.db.cocktails.find(c => c.name === action.payload.cocktailName),\n          {\n            enriching: false,\n            enrichmentFailed: true,\n            enrichmentFailedError: action.payload.error.message\n          }\n        );\n        break;\n      case actionTypes.FINISH_ENRICH_COCKTAIL:\n        Object.assign(\n          draft.db.cocktails.find(c => c.name === action.payload.cocktailName),\n          {\n            enriching: false,\n            enriched: true,\n            enrichment: action.payload.enrichment\n          }\n        );\n        break;\n      default:\n    }\n  });\n"]},"metadata":{},"sourceType":"module"}